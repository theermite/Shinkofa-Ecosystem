# Guide des Raccourcis Clavier Personnalisables - Hibiki

**Date**: 11 janvier 2026
**Version**: 2.0
**Auteur**: TAKUMI Agent (Jay The Ermite - Shinkofa)

---

## ğŸ¯ AperÃ§u

Hibiki **version 2.0** introduit un **systÃ¨me de raccourcis clavier 100% flexible** qui te permet de configurer **n'importe quelle combinaison de touches** pour l'enregistrement vocal, Ã©liminant complÃ¨tement les conflits avec d'autres applications ou raccourcis Windows.

### âœ¨ NouveautÃ©s v2.0

- ğŸ¹ **Enregistreur de touches interactif** : Presse n'importe quelle combinaison, aucune limite
- âš ï¸ **DÃ©tection de conflits Windows** : Avertissements non-bloquants pour raccourcis systÃ¨me
- ğŸ“œ **Historique des raccourcis** : Les 5 derniers raccourcis utilisÃ©s (accÃ¨s rapide)
- ğŸ”„ **Mode Toggle ET Push-to-Talk** : Configuration indÃ©pendante pour chaque mode
- âœ… **Validation en temps rÃ©el** : Affichage instantanÃ© de la combinaison pressÃ©e

---

## ğŸš€ AccÃ©der aux ParamÃ¨tres

1. Ouvre **Hibiki**
2. Clique sur le bouton **âš™ï¸ ParamÃ¨tres** dans l'interface principale
3. Dans la fenÃªtre des paramÃ¨tres, clique sur l'onglet **âŒ¨ï¸ Raccourcis**

---

## ğŸ¹ Enregistrer un Raccourci PersonnalisÃ©

### MÃ©thode 1 : Presets Rapides

**Raccourcis prÃ©-configurÃ©s disponibles** :
- **Toggle mode** :
  - `Alt + Shift + D` (DÃ©faut)
  - `Ctrl + Shift + D`
  - `Ctrl + Alt + D`

- **Push-to-Talk mode** :
  - `Alt + Shift + D` (DÃ©faut)
  - `Ctrl + Shift`
  - `Ctrl + Alt`

ğŸ‘‰ **Clique simplement sur un preset** pour l'appliquer instantanÃ©ment.

---

### MÃ©thode 2 : Enregistrement PersonnalisÃ© (NOUVEAU)

**Ã‰tapes** :

1. Clique sur le bouton orange :
   **ğŸ¹ Enregistrer un raccourci personnalisÃ©**

2. Une fenÃªtre modale s'ouvre avec le message :
   *"Pressez la combinaison de touches"*

3. **Maintiens les touches souhaitÃ©es** (ex: `Ctrl + Space`, `Alt + R`, `Win + F1`, etc.)

4. La combinaison s'affiche **en temps rÃ©el** pendant que tu maintiens les touches :
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   CTRL + SPACE           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

5. **RelÃ¢che les touches** â†’ La combinaison est enregistrÃ©e automatiquement

6. Si un **conflit Windows** est dÃ©tectÃ©, tu verras un avertissement :
   ```
   âš ï¸ Attention: Ce raccourci est utilisÃ© par Windows
   Action Windows: Afficher/masquer le bureau
   Il pourrait ne pas fonctionner comme prÃ©vu.
   ```

7. **Tu peux quand mÃªme l'utiliser** (libertÃ© totale) ou annuler avec `Ã‰chap`

8. Clique sur **âœ… Valider** pour confirmer

---

## ğŸ”„ Raccourcis RÃ©cents

Les **5 derniers raccourcis personnalisÃ©s** utilisÃ©s sont sauvegardÃ©s et affichÃ©s sous la section "Raccourcis rÃ©cents" :

```
Raccourcis rÃ©cents:
â€¢ CTRL + SPACE
â€¢ ALT + R
â€¢ WIN + F1
```

ğŸ‘‰ **Clique sur un raccourci rÃ©cent** pour le rÃ©utiliser instantanÃ©ment.

---

## âš ï¸ Raccourcis Windows RÃ©servÃ©s

Hibiki dÃ©tecte automatiquement les **raccourcis systÃ¨me Windows** et affiche un avertissement (non-bloquant).

### Liste des Raccourcis Windows DÃ©tectÃ©s

| Raccourci | Action Windows |
|-----------|----------------|
| `Win + D` | Afficher/masquer le bureau |
| `Win + L` | Verrouiller la session |
| `Win + E` | Ouvrir l'explorateur de fichiers |
| `Win + R` | Ouvrir ExÃ©cuter |
| `Win + I` | Ouvrir ParamÃ¨tres |
| `Win + Tab` | Vue des tÃ¢ches |
| `Win + Shift + S` | Capture d'Ã©cran (Snipping Tool) |
| `Ctrl + Alt + Delete` | Ã‰cran de sÃ©curitÃ© Windows |
| `Ctrl + Shift + Esc` | Gestionnaire des tÃ¢ches |
| `Alt + Tab` | Basculer entre les fenÃªtres |
| `Alt + F4` | Fermer la fenÃªtre active |
| `Win + V` | Historique du presse-papiers |
| `Win + H` | DictÃ©e vocale Windows |

âš ï¸ **Important** : Ces raccourcis peuvent ne pas fonctionner correctement car Windows les intercepte avant Hibiki. PrÃ©fÃ¨re des combinaisons alternatives.

---

## ğŸ’¡ Recommandations de Raccourcis

### âœ… Raccourcis SÃ»rs (Pas de Conflits)

| Combinaison | Usage RecommandÃ© |
|-------------|------------------|
| `Ctrl + Space` | Excellent pour Toggle (utilisÃ© par beaucoup d'IDEs mais configurable) |
| `Alt + R` | Rapide et facile Ã  atteindre |
| `Ctrl + Shift + A` | Peu utilisÃ© par dÃ©faut |
| `Ctrl + Alt + V` | Disponible dans la plupart des contextes |
| `F13` - `F24` | Touches fonction Ã©tendues (si ton clavier les supporte) |

### âš ï¸ Raccourcis Ã  Ã‰viter

- **Touches Win seules** : Conflits systÃ©matiques avec Windows
- **Ctrl + Alt + Delete** : RÃ©servÃ© par Windows (impossible Ã  override)
- **Alt + Tab** : Basculement de fenÃªtres Windows
- **Ctrl + C / V / X** : Raccourcis universels de copier/coller

### ğŸ¯ Configurations RecommandÃ©es

**Pour Usage Quotidien (Toggle Mode)** :
- `Ctrl + Space` (facile Ã  atteindre d'une main)
- `Alt + R` (index/pouce, rapide)

**Pour Push-to-Talk (Streaming/Meetings)** :
- `Ctrl + Shift` (deux mains, stable pour maintenir)
- `Ctrl + Alt` (confortable pour maintenir)

---

## ğŸ”§ Modes d'Enregistrement

### Mode Toggle (Basculement)

**Fonctionnement** :
- **Premier appui** â†’ DÃ©marre l'enregistrement
- **DeuxiÃ¨me appui** â†’ ArrÃªte l'enregistrement et transcrit

**Avantages** :
- Mains libres pendant l'enregistrement
- IdÃ©al pour dictÃ©e longue (emails, documents)

**Configuration** :
1. SÃ©lectionne **"Toggle (Appuyer pour dÃ©marrer/arrÃªter)"**
2. Configure ton raccourci Toggle
3. Clique sur **âœ… Enregistrer**

---

### Mode Push-to-Talk (Maintenir)

**Fonctionnement** :
- **Maintiens les touches** â†’ Enregistre en continu
- **RelÃ¢che les touches** â†’ ArrÃªte et transcrit

**Avantages** :
- ContrÃ´le prÃ©cis du moment exact d'enregistrement
- Pas de transcription accidentelle
- IdÃ©al pour gaming, meetings, streaming

**Configuration** :
1. SÃ©lectionne **"Push-to-Talk (Maintenir pour enregistrer)"**
2. Configure ton raccourci Push-to-Talk
3. Clique sur **âœ… Enregistrer**

---

## ğŸ› RÃ©solution de ProblÃ¨mes

### âŒ Mon raccourci ne fonctionne pas

**Causes possibles** :

1. **Conflit avec une autre application** :
   - Ferme temporairement d'autres applications (Discord, OBS, etc.)
   - VÃ©rifie leurs raccourcis dans leurs paramÃ¨tres

2. **Conflit avec Windows** :
   - Si tu as choisi un raccourci Windows rÃ©servÃ©, essaie une combinaison alternative
   - Consulte la liste des raccourcis Windows rÃ©servÃ©s ci-dessus

3. **Droits administrateur requis** :
   - Certaines applications (Task Manager, UAC) bloquent les raccourcis globaux
   - Lance Hibiki en administrateur si nÃ©cessaire

4. **Touches non reconnues** :
   - Certaines touches spÃ©ciales (ex: touches multimÃ©dia) peuvent ne pas Ãªtre supportÃ©es
   - PrivilÃ©gie Ctrl, Shift, Alt, lettres, chiffres, F1-F12

### âŒ Le KeyRecorder ne dÃ©tecte pas mes touches

**Solutions** :

1. **VÃ©rifie que la fenÃªtre KeyRecorder est active** (focus)
2. **Essaie une autre combinaison** (certaines touches peuvent Ãªtre bloquÃ©es par l'OS)
3. **RedÃ©marre Hibiki** si le problÃ¨me persiste
4. **Lance en administrateur** si tu utilises un clavier avec pilote spÃ©cial

### âŒ Mon historique de raccourcis ne se sauvegarde pas

**Solution** :

1. VÃ©rifie que le fichier `config/hibiki_preferences.json` est accessible en Ã©criture
2. VÃ©rifie les logs dans `logs/hibiki.log` pour des erreurs de sauvegarde
3. Reinitialise la config si corrompue :
   ```bash
   rm config/hibiki_preferences.json
   python src/main.py
   ```

---

## ğŸ“ Fichiers de Configuration

**Localisation** : `config/hibiki_preferences.json`

**Structure des raccourcis** :

```json
{
  "hotkey": {
    "mode": "toggle",
    "toggle_key": "ctrl+space",
    "push_to_talk_key": "ctrl+shift",
    "recent_hotkeys": [
      "ctrl+space",
      "alt+r",
      "win+f1",
      "ctrl+shift+a",
      "alt+shift+x"
    ]
  }
}
```

**Modification manuelle (avancÃ©)** :

Tu peux Ã©diter manuellement ce fichier, mais :
- âœ… Utilise le format `modifier+modifier+key` (tout en minuscules)
- âœ… Modifiers valides : `ctrl`, `shift`, `alt`, `win`
- âœ… RedÃ©marre Hibiki aprÃ¨s modification
- âŒ Ne laisse pas de champs vides
- âŒ Ne dÃ©passe pas 5 entrÃ©es dans `recent_hotkeys`

---

## ğŸ“ Exemples d'Utilisation

### Exemple 1 : Configuration Gaming (Push-to-Talk)

**Besoin** : Communiquer avec l'Ã©quipe pendant une partie sans conflits avec les touches de jeu.

**Solution** :
1. Mode : **Push-to-Talk**
2. Raccourci : `Ctrl + Alt` (facile Ã  maintenir avec le pouce)
3. Maintiens `Ctrl + Alt` â†’ Parle â†’ RelÃ¢che

âœ… Aucun conflit avec WASD, Space, Shift (touches gaming standards)

---

### Exemple 2 : DictÃ©e de Documents (Toggle)

**Besoin** : Dicter de longs textes sans maintenir une touche.

**Solution** :
1. Mode : **Toggle**
2. Raccourci : `Ctrl + Space` (accessible d'une main)
3. Appuie sur `Ctrl + Space` â†’ Dicte â†’ Appuie Ã  nouveau pour arrÃªter

âœ… Mains libres, confortable pour dictÃ©e longue

---

### Exemple 3 : Streaming avec OBS (Push-to-Talk)

**Besoin** : OBS utilise `Ctrl + Shift + D` pour une scÃ¨ne, Ã©viter le conflit.

**Solution** :
1. Mode : **Push-to-Talk**
2. Raccourci personnalisÃ© : `Alt + R` (via enregistreur)
3. Maintiens `Alt + R` pendant les annonces live

âœ… Aucun conflit avec OBS, contrÃ´le prÃ©cis

---

## ğŸ“Š Limites Techniques

- **Maximum 5 raccourcis rÃ©cents** : Les plus anciens sont automatiquement supprimÃ©s
- **Pas de support touches multimÃ©dia** : Volume, Play/Pause non supportÃ©s par dÃ©faut
- **Windows UAC** : Les fenÃªtres UAC (administrateur) bloquent tous raccourcis globaux
- **Remote Desktop** : Certains raccourcis peuvent ne pas passer via RDP

---

## ğŸ”— Ressources

- **Issues GitHub** : [Report a bug](https://github.com/theermite/hibiki/issues)
- **Documentation Technique** : `src/ui/key_recorder_dialog.py`
- **Tests** : `test_custom_hotkeys.py`

---

## ğŸ“œ Changelog

### v2.0 (11 janvier 2026)

- âœ… Ajout du **KeyRecorderDialog** (enregistreur de touches interactif)
- âœ… **DÃ©tection de conflits Windows** (18 raccourcis systÃ¨me dÃ©tectÃ©s)
- âœ… **Historique des 5 derniers raccourcis** utilisÃ©s
- âœ… **LibertÃ© totale** : Aucune limite de combinaison
- âœ… **Animation temps rÃ©el** : Affichage instantanÃ© de la combinaison pressÃ©e
- âœ… **Validation automatique** : Enregistrement au relÃ¢chement des touches

### v1.0 (Janvier 2026)

- Raccourcis prÃ©dÃ©finis uniquement (3 presets)
- Pas de dÃ©tection de conflits
- Pas d'historique

---

**Â© 2025 La Voie Shinkofa**
**Licence** : Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)
