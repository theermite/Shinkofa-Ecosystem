<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organisateur Familial v8 - Famille Gon√ßalves M√©jias</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header avec Gestion de crise -->
        <header class="app-header">
            <div class="container">
                <h1>üè† Organisateur Familial v8</h1>
                <div class="header-actions">
                    <div class="weather-family">
                        <span class="weather-icon" id="weather-icon">‚òÄÔ∏è</span>
                        <span class="weather-text" id="weather-text">M√©t√©o familiale : Ensoleill√©e</span>
                    </div>
                    <div class="current-date">
                        <span id="current-date">Samedi 2 ao√ªt 2025</span>
                    </div>
                    <button class="btn btn--secondary crisis-btn" id="crisis-btn">üö® Gestion de Crise</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <div class="container">
                <div class="nav-tabs">
                    <button class="nav-tab active" data-tab="dashboard">üè† Dashboard</button>
                    <button class="nav-tab" data-tab="planning">üìÖ Planning Interactif</button>
                    <button class="nav-tab" data-tab="profiles">üë• Profils & Checklists</button>
                    <button class="nav-tab" data-tab="tools">üõ†Ô∏è Outils</button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="app-main container">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <!-- Actions Rapides EN PREMIER -->
                <div class="card quick-actions-main">
                    <div class="card__header">
                        <h2>‚ö° Actions Rapides</h2>
                    </div>
                    <div class="card__body">
                        <div class="actions-grid">
                            <button class="btn btn--primary quick-action-btn" data-action="add-activity">
                                ‚ûï Ajouter activit√©
                            </button>
                            <button class="btn btn--secondary quick-action-btn" data-action="meal-planner">
                                üçΩÔ∏è Plan repas
                            </button>
                            <button class="btn btn--outline quick-action-btn" data-action="task-assign">
                                üìã R√©partir t√¢ches
                            </button>
                            <button class="btn btn--outline quick-action-btn" data-action="dice-activity">
                                üé≤ D√© activit√©s
                            </button>
                            <button class="btn btn--secondary quick-action-btn" data-action="energy-check">
                                üîã Check Energy
                            </button>
                            <button class="btn btn--outline quick-action-btn" data-action="optimize">
                                üéØ Optimiser planning
                            </button>
                            <button class="btn btn--primary quick-action-btn" data-action="export-ical">
                                üìÖ Export iCal
                            </button>
                            <button class="btn btn--outline quick-action-btn" data-action="export-pdf">
                                üìÑ Export PDF
                            </button>
                            <button class="btn btn--secondary quick-action-btn" data-action="export-meals-md">
                                üìù Export repas MD
                            </button>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Vue d'ensemble semaine -->
                    <div class="card dashboard-overview">
                        <div class="card__header">
                            <h2>üìÖ Vue d'ensemble de la semaine</h2>
                        </div>
                        <div class="card__body">
                            <div class="week-overview" id="week-overview">
                                <!-- Contenu g√©n√©r√© par JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Membres famille avec tracker √©nergie -->
                    <div class="card family-members">
                        <div class="card__header">
                            <h2>üë• Membres de la famille</h2>
                            <button class="btn btn--sm btn--primary" id="update-energy">üìä Tracker Energie</button>
                        </div>
                        <div class="card__body">
                            <div class="members-grid" id="family-members">
                                <!-- Contenu g√©n√©r√© par JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Syst√®me de reconnaissance -->
                    <div class="card recognition-system-card">
                        <div class="card__header">
                            <h2>üèÜ Syst√®me de reconnaissance</h2>
                            <button class="btn btn--sm btn--outline" id="reset-recognition">üîÑ Reset</button>
                        </div>
                        <div class="card__body">
                            <div class="recognition-system" id="recognition-system">
                                <!-- Contenu g√©n√©r√© par JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Planning Interactif Tab -->
            <div id="planning" class="tab-content">
                <div class="planning-layout">
                    <!-- Sidebar avec contraintes et imp√©ratifs -->
                    <div class="planning-sidebar">
                        <div class="card">
                            <div class="card__header">
                                <h3>üìã Imp√©ratifs & Contraintes</h3>
                                <div class="sidebar-controls">
                                    <select class="form-control" id="template-selector">
                                        <option value="">Templates</option>
                                        <option value="weekend">Journ√©e week-end</option>
                                        <option value="crisis">Mode crise</option>
                                        <option value="vacation">Vacances</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card__body">
                                <div class="constraints-checklist" id="constraints-checklist">
                                    <!-- Contenu g√©n√©r√© par JS -->
                                </div>
                                <button class="btn btn--sm btn--outline mt-16" id="add-constraint">‚ûï Ajouter imp√©ratif</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contenu principal planning -->
                    <div class="planning-main">
                        <div class="planning-container">
                            <div class="planning-header">
                                <h2>üìÖ Planning Interactif (7h-24h, cr√©neaux 30 min)</h2>
                                <div class="planning-controls">
                                    <button class="btn btn--sm btn--outline" id="prev-week">‚Üê Semaine pr√©c√©dente</button>
                                    <span class="current-week" id="current-week-display">Semaine du 28 juillet - 3 ao√ªt 2025</span>
                                    <button class="btn btn--sm btn--outline" id="next-week">Semaine suivante ‚Üí</button>
                                </div>
                                <div class="planning-legend">
                                    <span class="legend-item legend-jay">Jay</span>
                                    <span class="legend-item legend-angelique">Ang√©lique</span>
                                    <span class="legend-item legend-gautier">Gautier</span>
                                    <span class="legend-item legend-family">Famille</span>
                                </div>
                            </div>
                            <div class="planning-wrapper">
                                <div class="planning-timeline">
                                    <div class="timeline-hours" id="timeline-hours">
                                        <!-- Heures g√©n√©r√©es par JS -->
                                    </div>
                                </div>
                                <div class="planning-grid-container">
                                    <div class="planning-days-header" id="planning-days-header">
                                        <!-- En-t√™tes des jours g√©n√©r√©es par JS -->
                                    </div>
                                    <div class="planning-grid" id="planning-grid">
                                        <!-- Grille g√©n√©r√©e par JS -->
                                    </div>
                                </div>
                            </div>
                            <div class="planning-instructions">
                                <p><strong>Instructions :</strong> Cliquez pour cr√©er ‚Ä¢ Glissez-d√©posez pour d√©placer ‚Ä¢ Redimensionnez avec les poign√©es ‚Ä¢ Double-clic pour √©diter ‚Ä¢ Clic droit pour supprimer</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profils D√©taill√©s Tab -->
            <div id="profiles" class="tab-content">
                <div class="profiles-container">
                    <h2>üë• Profils d√©taill√©s Human Design</h2>
                    <div class="profiles-detailed" id="profiles-detailed">
                        <!-- Contenu g√©n√©r√© par JS -->
                    </div>
                </div>
            </div>

            <!-- Outils Tab -->
            <div id="tools" class="tab-content">
                <div class="tools-container">
                    <h2>üõ†Ô∏è Outils d'organisation</h2>
                    <div class="tools-grid">
                        <!-- Plan repas avec export MD -->
                        <div class="card">
                            <div class="card__header">
                                <h3>üçΩÔ∏è Plan repas (7 jours √ó 2 repas)</h3>
                                <button class="btn btn--sm btn--primary" id="export-meals-btn">üìù Export MD + Courses</button>
                            </div>
                            <div class="card__body">
                                <div class="meal-planning" id="meal-planning">
                                    <!-- G√©n√©r√©e par JS -->
                                </div>
                            </div>
                        </div>

                        <!-- R√©partition t√¢ches multi-assignation -->
                        <div class="card">
                            <div class="card__header">
                                <h3>üìã R√©partition t√¢ches - Multi-assignation</h3>
                                <button class="btn btn--sm btn--outline" id="add-task">‚ûï Ajouter t√¢che</button>
                            </div>
                            <div class="card__body">
                                <div class="task-distribution" id="task-distribution">
                                    <!-- G√©n√©r√©e par JS -->
                                </div>
                            </div>
                        </div>

                        <!-- D√© activit√©s avec √©dition -->
                        <div class="card">
                            <div class="card__header">
                                <h3>üé≤ D√© activit√©s par √©nergie</h3>
                                <button class="btn btn--sm btn--outline" id="edit-activities">‚úèÔ∏è √âditer listes</button>
                            </div>
                            <div class="card__body">
                                <div class="activity-dice" id="activity-dice">
                                    <!-- G√©n√©r√©e par JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Pomodoro r√©glable -->
                        <div class="card">
                            <div class="card__header">
                                <h3>üçÖ Timer Pomodoro par profil</h3>
                                <button class="btn btn--sm btn--outline" id="pomodoro-settings">‚öôÔ∏è R√©glages</button>
                            </div>
                            <div class="card__body">
                                <div class="pomodoro-timer" id="pomodoro-timer">
                                    <!-- G√©n√©r√©e par JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modal cr√©ation/√©dition √©v√©nement -->
        <div class="modal hidden" id="event-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="event-modal-title">Cr√©er √©v√©nement</h3>
                    <button class="modal-close" id="close-event-modal">√ó</button>
                </div>
                <div class="modal-body">
                    <form id="event-form">
                        <input type="hidden" id="event-id">
                        <div class="form-group">
                            <label class="form-label">Titre</label>
                            <input type="text" class="form-control" id="event-title" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Jour de la semaine</label>
                            <select class="form-control" id="event-day" required>
                                <option value="0">Lundi</option>
                                <option value="1">Mardi</option>
                                <option value="2">Mercredi</option>
                                <option value="3">Jeudi</option>
                                <option value="4">Vendredi</option>
                                <option value="5">Samedi</option>
                                <option value="6">Dimanche</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Heure d√©but</label>
                            <input type="time" class="form-control" id="event-start" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Heure fin</label>
                            <input type="time" class="form-control" id="event-end" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Dur√©e calcul√©e</label>
                            <input type="text" class="form-control" id="event-duration-display" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Membre responsable</label>
                            <select class="form-control" id="event-member" required>
                                <option value="jay">Jay</option>
                                <option value="angelique">Ang√©lique</option>
                                <option value="gautier">Gautier</option>
                                <option value="family">Famille</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="event-description" rows="3"></textarea>
                        </div>
                        <div class="flex gap-8 mt-16">
                            <button type="submit" class="btn btn--primary">‚úÖ Sauvegarder</button>
                            <button type="button" class="btn btn--outline" id="cancel-event">‚ùå Annuler</button>
                            <button type="button" class="btn btn--secondary" id="delete-event">üóëÔ∏è Supprimer</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Modal Gestion de Crise -->
        <div class="modal hidden" id="crisis-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>üö® Protocoles de Gestion de Crise</h3>
                    <button class="modal-close" id="close-crisis-modal">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="crisis-selector">
                        <div class="form-group">
                            <label class="form-label">Personne concern√©e</label>
                            <select class="form-control" id="crisis-person">
                                <option value="">S√©lectionner...</option>
                                <option value="jay">Jay</option>
                                <option value="angelique">Ang√©lique</option>
                                <option value="gautier">Gautier</option>
                                <option value="lyam">Lyam (9 ans)</option>
                                <option value="theo">Th√©o (7 ans)</option>
                                <option value="evy">Evy (1.5 ans)</option>
                                <option value="nami">Nami (0.3 ans)</option>
                            </select>
                        </div>
                    </div>
                    <div id="crisis-protocols" class="crisis-protocols">
                        <p>S√©lectionnez une personne pour afficher les protocoles appropri√©s.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal D√© activit√©s -->
        <div class="modal hidden" id="dice-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üé≤ D√© d'activit√©s</h3>
                    <button class="modal-close" id="close-dice-modal">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="dice-container">
                        <div class="form-group">
                            <label class="form-label">Type</label>
                            <select class="form-control" id="dice-type">
                                <option value="member">Par membre</option>
                                <option value="family">Famille</option>
                            </select>
                        </div>
                        <div class="form-group" id="member-selector">
                            <label class="form-label">Membre</label>
                            <select class="form-control" id="dice-member">
                                <option value="jay">Jay</option>
                                <option value="angelique">Ang√©lique</option>
                                <option value="gautier">Gautier</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Niveau d'√©nergie (1-5)</label>
                            <div class="energy-slider">
                                <input type="range" min="1" max="5" value="3" class="form-control" id="energy-slider">
                                <div class="energy-display">
                                    <span>üò¥</span><span>üòî</span><span>üòê</span><span>üòä</span><span>‚ö°</span>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn--primary btn--full-width" id="roll-dice">üé≤ Lancer</button>
                        <div class="dice-result" id="dice-result"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Plan repas -->
        <div class="modal hidden" id="meal-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>üçΩÔ∏è Plan repas hebdomadaire</h3>
                    <button class="modal-close" id="close-meal-modal">√ó</button>
                </div>
                <div class="modal-body" id="meal-modal-content">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
        </div>

        <!-- Modal R√©partition t√¢ches -->
        <div class="modal hidden" id="tasks-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>üìã R√©partition des t√¢ches</h3>
                    <button class="modal-close" id="close-tasks-modal">√ó</button>
                </div>
                <div class="modal-body" id="tasks-modal-content">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
        </div>

        <!-- Modal Tracker √©nergie -->
        <div class="modal hidden" id="energy-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üîã Tracker √ânergie Quotidien</h3>
                    <button class="btn btn--sm btn--outline" id="energy-help">‚ÑπÔ∏è</button>
                    <button class="modal-close" id="close-energy-modal">√ó</button>
                </div>
                <div class="modal-body" id="energy-modal-content">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
        </div>

        <!-- Modal Pomodoro Settings -->
        <div class="modal hidden" id="pomodoro-settings-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üçÖ R√©glages Pomodoro</h3>
                    <button class="modal-close" id="close-pomodoro-settings">√ó</button>
                </div>
                <div class="modal-body" id="pomodoro-settings-content">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
        </div>

        <!-- Modal √âdition activit√©s -->
        <div class="modal hidden" id="edit-activities-modal">
            <div class="modal-overlay modal-overlay-opaque"></div>
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>‚úèÔ∏è √âditer les listes d'activit√©s</h3>
                    <button class="modal-close" id="close-edit-activities">√ó</button>
                </div>
                <div class="modal-body" id="edit-activities-content">
                    <!-- Contenu g√©n√©r√© par JS -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>